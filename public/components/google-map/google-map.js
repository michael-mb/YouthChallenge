function SimpleGoogleMap(e){return({node:node,markers:markers,...params}=e),node.simpleGoogleMap=this,this.node=node,this.markers=markers,this.params=params,this.geocoder=new google.maps.Geocoder,"string"==typeof this.params.center?(this.map=new google.maps.Map(this.node,{...this.params,center:{lat:0,lng:0}}),this.setCenter(this.params.center)):this.map=new google.maps.Map(this.node,this.params),this.procMarkers(),this}SimpleGoogleMap.prototype.setCenter=function(e){this.getPosition(e,function(e){this.params.center=e,this.map.setCenter(this.params.center)}.bind(this))},SimpleGoogleMap.prototype.procMarkers=function(){if(this.markers instanceof Object&&Object.getOwnPropertyNames(this.markers).length>0)for(let e in this.markers){let t=this.markers[e];"string"==typeof t.position?this.getPosition(t.position,function(i){t.position=i,this.setMarker(e)}.bind(this)):this.setMarker(e)}},SimpleGoogleMap.prototype.setMarker=function(e){let t=this.markers[e];t.instance=new google.maps.Marker({map:this.map,...t}),t.html&&(t.info=new google.maps.InfoWindow({content:t.html}),t.instance.addListener("click",function(){for(let e in this.markers)void 0!==this.markers[e].info&&this.markers[e].info.close();t.info.open(this.map,t.instance)}.bind(this)))},SimpleGoogleMap.prototype.addMarker=function(e,t){let i=this.markers[e]=t;"string"==typeof i.position?this.getPosition(i.position,function(t){i.position=t,this.setMarker(e)}.bind(this)):this.setMarker(e)},SimpleGoogleMap.prototype.delMarker=function(e){this.markers[e].instance.setMap(null),delete this.markers[e]},SimpleGoogleMap.prototype.hideMarker=function(e){this.markers[e].instance.setMap(null)},SimpleGoogleMap.prototype.showMarker=function(e){this.markers[e].instance.setMap(this.map)},SimpleGoogleMap.prototype.getPosition=function(e,t){this.geocoder.geocode({address:e},function(i,s){"OK"===s?t(i[0].geometry.location):"OVER_QUERY_LIMIT"===s?setTimeout(this.getPosition.bind(this,e,t),1e3):console.warn(s,e)}.bind(this))},SimpleGoogleMap.prototype.showInfo=function(e){for(let e in this.markers)void 0!==this.markers[e].info&&this.markers[e].info.close();void 0!==this.markers[e]&&this.markers[e].info.open(this.map,this.markers[e].instance)},SimpleGoogleMap.prototype.search=function(e){for(let e in this.markers)this.delMarker(e);this.getPosition(e,function(t){this.map.setCenter(t),this.addMarker(e,{position:t})}.bind(this))},SimpleGoogleMap.prototype.filter=function(e){let t=Object.getOwnPropertyNames(this.markers),i=[];i=e.includes("*")?t:t.filter(function(t){let i=this.markers[t];for(let t=0;t<i.tags.length;t++)if(e.includes(i.tags[t]))return!0;return!1}.bind(this));for(let e in this.markers)i.includes(e)?this.showMarker(e):this.hideMarker(e)};