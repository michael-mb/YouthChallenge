function RDSearch(t){if(!t.output)throw new Error("output is required parameter for RDSearch");for(let e in RDSearch.defaults)this[e]=void 0!==t[e]?t[e]:RDSearch.defaults[e];"string"==typeof this.form&&(this.form=document.querySelector(this.form)),"string"==typeof this.output&&(this.output=document.querySelector(this.output)),this.input=this.form.querySelector('input[name="s"]'),this.form.RDSearch=this,location.search&&this.getResult(location.search),this.form&&this.addHandlers()}RDSearch.defaults={handler:"bat/rd-search.php",filter:"*.html",template:'<h5 class="search-title"><a target="_top" href="#{href}" class="search-link">#{title}</a></h5>\n\t\t<p>...#{token}...</p>\n\t\t<p class="match"><em>Terms matched: #{count} - URL: #{href}</em></p>',form:null,input:null,output:null,mode:null,liveResults:5,minStrLength:3},RDSearch.prototype.addHandlers=function(){switch(this.mode){case"live":let t;this.input.addEventListener("focus",()=>{this.input.value.trim().length>=this.minStrLength&&(clearTimeout(t),this.output.classList.add("rd-search-show"))}),this.input.addEventListener("blur",()=>{t=setTimeout(()=>{this.output.classList.remove("rd-search-show")},1500)}),this.output.addEventListener("mousemove",()=>{clearTimeout(t),this.output.classList.add("rd-search-show")}),this.output.addEventListener("mouseleave",()=>{t=setTimeout(()=>{this.output.classList.remove("rd-search-show")},1500)}),this.input.addEventListener("input",()=>{this.input.value.trim().length>=this.minStrLength?(this.output.classList.add("rd-search-show"),this.getResult({s:this.input.value})):this.output.classList.remove("rd-search-show")});break;case"submit":this.form.addEventListener("submit",t=>{t.preventDefault(),this.getResult({s:this.input.value})})}},RDSearch.prototype.getResult=function(t){this.output.classList.add("rd-search-loading");let e=new XMLHttpRequest,s=new URLSearchParams(t);s.append("template",this.template),s.append("filter",this.filter),"live"===this.mode&&(s.append("liveSearch",!0),s.append("liveCount",this.liveResults)),e.open("GET",this.handler+"?"+s.toString(),!0),e.onreadystatechange=(t=>{4===e.readyState&&200===e.status&&(this.output.innerHTML=e.response,this.output.classList.remove("rd-search-loading"))}),e.send()};